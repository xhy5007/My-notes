# 静态路由综合实验

## 一、实验名称

静态路由综合实验

## 二、实验目的

1. 掌握华为 AR 路由器接口 IP 地址配置方法。
2. 理解并掌握静态路由与浮动静态路由的配置与应用。
3. 掌握 DHCP 服务器的基本配置，实现主机自动获取 IP 地址。
4. 能够通过逐跳排错的方法定位和解决网络连通性故障。

## 三、实验拓扑说明

本实验采用多路由器冗余拓扑结构，核心设备包括 AR1、AR2、AR3、AR4、AR5，一台二层交换机 LSW1 以及两台终端 PC。

- AR1、AR2、AR3、AR4 构成菱形冗余网络
- AR4 与 AR5 之间使用两条链路（主链路 + 备份链路）
- AR5 作为 DHCP 服务器，为 PC1、PC2 分配 IP 地址
- PC 通过 LSW1 接入网络

------

## 四、IP 地址规划

| 连接链路      | 网络地址        | 设备 | IP 地址      |
| ------------- | --------------- | ---- | ------------ |
| AR1–AR2       | 192.168.1.0/30  | AR1  | 192.168.1.1  |
|               |                 | AR2  | 192.168.1.2  |
| AR2–AR4       | 192.168.1.4/30  | AR2  | 192.168.1.5  |
|               |                 | AR4  | 192.168.1.6  |
| AR1–AR3       | 192.168.1.8/30  | AR1  | 192.168.1.9  |
|               |                 | AR3  | 192.168.1.10 |
| AR3–AR4       | 192.168.1.12/30 | AR3  | 192.168.1.13 |
|               |                 | AR4  | 192.168.1.14 |
| AR4–AR5（主） | 192.168.1.16/30 | AR4  | 192.168.1.17 |
|               |                 | AR5  | 192.168.1.18 |
| AR4–AR5（备） | 192.168.1.20/30 | AR4  | 192.168.1.21 |
|               |                 | AR5  | 192.168.1.22 |
| PC 网段       | 192.168.1.32/29 | AR5  | 192.168.1.33 |

## 五、实验配置步骤

### 5.1 路由器接口 IP 配置（以 AR3 为例）

```
[Huawei]system-view
[Huawei]sysname AR3
[AR3]interface GigabitEthernet0/0/0
[AR3-GE0/0/0]ip address 192.168.1.10 255.255.255.252
[AR3-GE0/0/0]quit
[AR3]interface GigabitEthernet0/0/1
[AR3-GE0/0/1]ip address 192.168.1.13 255.255.255.252
[AR3-GE0/0/1]quit
```

其余路由器接口配置方法相同。

### 5.2 静态路由配置

#### （1）AR3 配置到 AR1 网段的静态路由

```
[AR3]ip route-static 192.168.1.0 255.255.255.252 192.168.1.14
```

#### （2）AR4 配置到 AR1 网段的静态路由

```
[AR4]ip route-static 192.168.1.0 255.255.255.252 192.168.1.5
```

#### （3）AR1 配置回 PC 网段的静态路由

```
[AR1]ip route-static 192.168.1.32 255.255.255.248 192.168.1.2
[AR1]ip route-static 192.168.1.32 255.255.255.248 192.168.1.10
```

### 5.3 浮动静态路由配置（AR4）

```
[AR4]ip route-static 192.168.1.32 255.255.255.248 192.168.1.18 preference 60
[AR4]ip route-static 192.168.1.32 255.255.255.248 192.168.1.22 preference 100
```

主链路优先级高，当主链路故障时自动切换到备份链路。

### 5.4 DHCP 服务器配置（AR5）

```
[AR5]dhcp enable
[AR5]ip pool LAN
[AR5-ip-pool-LAN]network 192.168.1.32 mask 255.255.255.248
[AR5-ip-pool-LAN]gateway-list 192.168.1.33
[AR5-ip-pool-LAN]dns-list 8.8.8.8
[AR5-ip-pool-LAN]quit
[AR5]interface GigabitEthernet0/0/2
[AR5-GE0/0/2]dhcp select global
```

------

## 六、实验验证

1. PC1、PC2 成功通过 DHCP 获取 IP 地址。
2. PC1 能 ping 通网关 192.168.1.33。
3. PC1 能依次 ping 通 AR5、AR4、AR1。

## 七、实验故障与解决

### 问题现象

PC1 无法 ping 通 192.168.1.1。

### 原因分析

AR3 与 AR1 之间缺少到 192.168.1.0/30 网段的静态路由，且 AR1 未配置回 PC 网段的路由，导致 ICMP 回包无法返回。

### 解决方法

补充各路由器间必要的静态路由后，网络恢复正常通信。

## 八、实验总结

通过本次实验，加深了对华为静态路由、浮动静态路由以及 DHCP 服务配置的理解。实验过程中体会到回程路由在网络通信中的重要性，并掌握了逐跳排错的方法，为后续复杂网络实验打下了良好基础。

